# تنظیمات انبارداری

در این قسمت می‌توانید نوع انبارداری مورد استفاده در نرم‌افزار را تعیین نمایید.

![تنظیمات انبارداری](Warehousing2.png)

## A. تنظیمات انبارداری
در این بخش **(شماره ۱ )** می‌توانید نوع انبارداری مورد نظر را انتخاب نمایید. انبارداری نرم‌افزار شما می‌تواند بر اساس یکی از سه حالت زیر تنظیم گردد:

### بر اساس تعداد
انبارداری بر اساس تعداد **(انبارداری تعدادی)** نوعی از انبارداری است که به صورت پیش‌فرض در نرم‌افزار فعال است. استفاده از این نوع انبارداری نیاز به تهیه ماژول جداگانه نداشته و برای کاربرانی که **مدیریت فروش/خرید** داشته باشند قابل استفاده است. در این نوع انبارداری، موجودی کالاها در قسمت[ مدیریت محصولات](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Product-management/Product-management.md) تعیین شده و از طریق فاکتورهای خرید و فروش، افزایش و کاهش می‌یابد.

### بر اساس وب‌ سرویس
در صورتی که از نرم‌افزار دیگری برای انبارداری استفاده می‌کنید و قصد اتصال آن به پیام‌گستر را دارید،‌ حالت انبارداری بر اساس وب‌ سرویس باید در این قسمت انتخاب شده باشد. در این حالت تغییر موجودی هنگام خرید/فروش محصول، در نرم‌افزار پیام‌گستر و نرم‌افزار انبارداری شما به صورت همگام قابل رویت خواهد بود. 
با انتخاب این حالت، **تنظیمات وب سرویس** **(شماره ۲ )** فعال و قابل درج می‌گردد. به منظور اعمال تنظیمات، اطلاعات درخواستی را در قسمت مربوطه وارد نمایید.
- **آدرس وب سرویس دریافت موجودی:** در این قسمت URL نرم‌افزار پیام‌گستر خود را وارد نمایید.
- **آدرس وب سرویس ارسال موجودی:** در این قسمت آدرس URL نرم‌افزار انبارداری خود را وارد نمایید.
- **نام کاربری:** نام کاربری ادمین نرم‌افزار انبارداری خود را وارد نمایید.
- **رمز عبور:** رمز عبور ادمین نرم‌افزار انبارداری خود را وارد نمایید.

برای دریافت و ارسال موجودی از کدهای جیسون زیر و روش **Post** استفاده کنید. در این کد، منظور از نام‌ کاربری و رمز عبور، نام کاربری و رمز عبور ادمین نرم‌افزار انبارداری است. شناسه و کد هر محصول در بخش [مدیریت محصولات](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Product-management/Product-management.md) در صفحه اطلاعات هر [محصول](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Product-management/AddingProduct_2.8.6.md) در دسترس است. برای دسترسی به کد هر انبار به صفحه [مدیریت انبارها](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Settings/Warehouse-management/warehouse-new.md) مراجعه نمایید.<br>

**کد جیسون ارسالی برای دریافت موجودی**

```
{
    "UserName": "< نام کاربری>",
    "Password": "<رمز عبور>",
    "Code": "<کد محصول در پیام‌گستر>" 
}
```

**کد جیسون دریافتی برای دریافت موجودی**

```
[
    {
        InventoryId : "<شناسه انبار مورد نظر در نرم‌افزار انبارداری>",
        InventoryName : "<نام انبار مورد نظر در نرم‌افزار انبارداری>",
        InventoryCode : "<کد انبار مورد نظر در نرم‌افزار انبارداری>",
        StockRemain: 50,  // "<موجودی باقیمانده>",
        FreezeRemain: 10, // "<موجودی فریز شده>",
        IsActiveString:  فعال/غیرفعال"<وضعیت انبار>",
        IsActive: true // "<وضعیت انبار>"
    },
    {
        .....
    }
] 
```

**کد جیسون ارسال موجودی**

``` 
{
    "UserName": "< نام کاربری>" ,
    "Password": "<رمز عبور>" ,
    "UsedProducts":
    [
        {
            ProductId : "<شناسه محصول در پیام‌گستر>",
            ProductCode : "<کد محصول در پیام‌گستر>",
            Count: 10 // "<تعداد موجودی مصرف شده>"
        },
        {
            ....
        }
    ] 
}
```

### بر اساس سریال
در صورت فعال بودن ماژول انبارداری، با انتخاب این گزینه می‌توانید انبارداری محصولات خود را از طریق ایجاد انبارهای مختلف و **صدور رسید و حواله‌هایی** بر اساس سریال محصولات انجام دهید. در این حالت موجودی کالاها مطابق رسید و حواله‌های انبار تعیین شده و قسمت انبارداری در[ مدیریت محصولات](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Product-management/Product-management.md) (که در انبارداری تعدادی به آن اشاره شد) غیر فعال می‌گردد.<br>
با فعال کردن گزینه‌ی **جلوگیری از ثبت تراکنش در صورت عدم رعایت توالی سریال و تاریخ** **(شماره ۳ )** رعایت صعودی بودن سریال و تاریخ تراکنش‌های انبار الزامی می‌گردد و در صورت متناقض بودن آن، سیستم اجازه ثبت تراکنش را نخواهد داد. به طور مثال اگر در روز جاری یک تراکنش انبار با سریال 25 ثبت کنید، تراکنش‌های ثبت شده در روزهای آتی نمی‌توانند سریالی کمتر از 25 داشته باشند.<br>
> **نکته**<br>
> با فعال کردن گزینه‌ی **نمایش گزارش موجودی انبار به صورت عدد صحیح (شماره ۴)** تعداد محصولات در گزارش موجودی انبار و گزارش کاردکس کالا به صورت صحیح نمایش داده می‌شود. این تنظیمات در سایر اطلاعات اعم از محاسباتی و مبالغ اعمال **نمی‌گردد**. <br>

### B. تنظیمات نقطه سفارش

در این قسمت می توانید تنظیماتی اعمال کنید که در صورت رسیدن میزان موجودی محصولات به نقطه سفارشی که برای آن محصول تعریف کرده‌اید، عملیاتی خودکار توسط سیستم انجام شود، این عملیات می‌تواند ارسال پیام به یک کاربر/گروه/سمت مشخص یا ایجاد یک فرم (مثلاً فرم سفارش خرید) باشد.

> **نکته** <br> 
> این نقطه سفارش در صورت استفاده از انبارداری تعدادی، در قسمت [مدیریت محصولات](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Product-management/Product-management.md) و در صورت استفاده از انبارداری سریالی به ازای هر انبار و در قسمت [مدیریت محصولات انبار ](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Settings/Warehouse-management/manage-mahsool.md) تعیین می‌گردد.<br> 

اقدام مورد نیاز در شرایط رسیدن به نقطه سفارش را به این ترتیب تنظیم نمایید:<br>
- برای انجام خودکار عملیات نقطه سفارش، گزینه انجام خودکار عملیات نقطه سفارش **(شماره ۵ )** را فعال کنید و در گام‌های بعدی، نوع عملیات را مشخص کنید.
- در صورتی که قصد دارید هنگام رسیدن موجودی محصولات به نقطه سفارش، یک فرم توسط سیستم ایجاد گردد، گزینه ثبت فرم سفارش **(شماره ۶ )** را فعال کنید و در گزینه‌های بعدی نوع فرم و فیلدهایی که نام محصول، نام انبار مربوطه و میزان موجودی محصول باید در آن‌ها درج شود را مشخص نمایید. این فرم در واقع باید برای سفارش‌گذاری و تامین موجودی می‌باشد. بنابراین می‌توانید با پیاده‌سازی چرخه کاری مناسب روی این فرم، سفارش‌گذاری محصولات را در زمان مناسب انجام دهید.
- در صورتی که قصد دارید هنگام رسیدن موجودی محصولات به نقطه سفارش، یک پیام به کاربر/گروه/سمت مشخصی ارسال گردد، گزینه ارسال پیام نقطه سفارش **(شماره ۷)** را فعال نموده و در فیلد بعدی کاربر/گروه/سمت دریافت کننده پیام را مشخص کنید. توجه کنید که این پیام از نوع پیام‌های سیستمی می‌باشد و می‌تواند از طریق رسانه‌های پیامک، ایمیل، پیام کوتاه شبکه اجتماعی نیز ارسال گردد.

> **نکته** <br> 
> برای ویرایش متن پیام مرتبط با نقطه سفارش به [مدیریت پیام های سیستم](https://github.com/1stco/PayamGostarDocs/blob/master/Help/Basic-Information/Manage-system-messages/Manage-system-messages.md) مراجعه کنید.



